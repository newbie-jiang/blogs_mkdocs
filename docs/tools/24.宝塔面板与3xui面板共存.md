



## 宝塔面板正常搭建了一个网址占用443端口



这是一种 **通过 Nginx 反向代理** 的共存方式，让：

- 宝塔面板（Nginx）继续占用 **443 端口** 提供网站访问
- **3x-ui 节点（vmess+ws 或 vless+ws）** 的流量通过 Nginx 转发到本地的 **3x-ui 监听端口**（如 `127.0.0.1:10000`）

------

## **这种方式的特点**

1. **单端口共存**
   - 宝塔网站和 3x-ui 节点都通过同一个 **443 端口** 工作。
   - 外部访问看起来都走 HTTPS，TLS 由 Nginx 统一处理。
2. **反向代理转发节点流量**
   - Nginx 检测路径（如 `/vmess`），把该请求转发到本地的 x-ui/3x-ui 端口。
   - 其他路径则继续作为网站服务。

## 流程

- 安装3x-ui面板

```
apt update -y && apt install -y curl && apt install -y socat
bash <(curl -Ls https://raw.githubusercontent.com/xeefei/3x-ui/master/install.sh)
```

- 安装x-ui或者3x-ui，配置vmess+ws

![image-20250824180042655](https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250824180042655.png)

找到网站的配置文件添加如下

- 注意此处端口要与x-ui开放的端口相对应

```
location /vmess
    {
        proxy_pass http://127.0.0.1:10000;
        proxy_redirect off;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $http_host;
        proxy_read_timeout 300s;
    }
```



导入节点

- 将ip更改为域名，使能tls

- 填写伪装域名和路径与x-ui面板设置一致