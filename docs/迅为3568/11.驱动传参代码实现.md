







传输到tmp

```
scp hello_params.ko root@192.168.0.104:/tmp/
```

测试

插入模块

```
insmod hello_params.ko  enable=1 level=7 debug=9 gains=1,2,3 channel=6,11 namep=test devname=mydev ratio=80 hellocore=42
```

这里可以一次性传入各种参数。比如：

- `enable=1` 打开
- `level=7` 设置日志级别
- `gains=1,2,3` 传数组
- `channel=6,11` 传无符号数组
- `ratio=80` 自定义回调校验 (0–100 有效)
- `hellocore=42` 仅在作为模块编译时会生效

```
[root@topeet:/tmp]# insmod hello_params.ko  enable=1 level=7 debug=9 gains=1,2,3 channel=6,11 namep=test devname=mydev ratio=80 hellocore=42
[93304.661267] hello_params: init
[93304.661370]  enable=1 level=7 debug(level2[root@topeet:/tmp]# )=9 namep="test" devname="mydev" ratio=80 hellocore=42
[93304.661380]  gains[3]: 1 2 3
[93304.661391]  channel[2]: 6 11
[93304.661401] hello_params: loaded.

```



不加任何参数 （打印默认值）

```
[root@topeet:/tmp]# insmod hello_params.ko 
[93845.716549] hello_params: init
[93845.716651]  enable=1 level=3 debug(level2)=5 [rootn@topeet:/tmp]# amep="world" devname="hello0" ratio=50 hellocore=0
[93845.716661]  gains[8]: 0 0 0 0 0 0 0 0
[93845.716676]  channel[8]: 0 0 0 0 0 0 0 0
[93845.716688] hello_params: loaded.
```



查看内核日志

```
dmesg | tail -n 30
```



