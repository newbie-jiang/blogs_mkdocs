## 1. 什么是 YUV？

**YUV** 是一种常见的**颜色编码方式**，主要用于视频采集、存储、传输和处理。

- **Y**：亮度（Luminance），表示黑白（灰度）信息
- **U/V**：色度（Chrominance），表示色彩信息
  - U：蓝色色度（Blue minus Luma，Cb）
  - V：红色色度（Red minus Luma，Cr）

> **YUV = 亮度(Y) + 色度(U/V)**

------

## 2. YUV 为什么会出现？

**本质原因：**

- **人眼对亮度更敏感，对色彩不敏感。**
- **带宽和存储有限，如何压缩数据、减少数据量，而又不损失太多画质？**

**历史原因和优势：**

1. **视频信号压缩（最初用于模拟电视）**
   - 只要保存完整的亮度(Y)，色度(U/V)可以降低精度或抽样。
   - 色度信息用更低分辨率存储/传输，大幅降低数据量，但视觉损失不明显。
2. **高效编码和兼容性**
   - 可以直接与黑白电视兼容（只要Y通道），节约了早期设备升级的成本。
3. **数字视频和图像处理的主流格式**
   - 如 H.264、JPEG、MPEG、V4L2 等各种标准，底层都是用 YUV 做中间处理或最终编码。

------

## 3. YUV 有哪些常见格式？

### **YUV 格式分两大类：抽样方式 + 排列方式**

#### （1）**按采样率分类**（重点关注）

| 格式   | Y:U:V 比例 | 含义                      | 数据量 | 常见应用         |
| ------ | ---------- | ------------------------- | ------ | ---------------- |
| YUV444 | 4:4:4      | Y/U/V 每像素都有          | 最大   | 专业场合/高品质  |
| YUV422 | 4:2:2      | Y 每像素，U/V 每2像素共用 | 2/3    | 采集、监控、电视 |
| YUV420 | 4:2:0      | Y 每像素，U/V 每4像素共用 | 1/2    | 编码、存储、播放 |
| YUV411 | 4:1:1      | Y 每像素，U/V 每4像素共用 | 更少   | 部分特殊应用     |
| YUV400 | 4:0:0      | 只有 Y，无色彩（灰度）    | 最少   | 黑白图像         |



#### （2）**按排列/存储方式分类**（面试常考）

- **打包（Packed/Interleaved）格式**
  - 典型如 YUYV（YUV422 Packed），一行里 Y/U/V 按顺序排列，如：Y0 U0 Y1 V0 Y2 U1 Y3 V1...
- **平面（Planar）格式**
  - Y、U、V 分开存储，如 YYYYY...UUUU...VVVV...（YUV420P、YUV422P）

#### （3）**典型格式举例**

- **YUYV/YUY2/YUV422P**
  - 一行里数据交错（YUYVYUYV...）
- **NV12/NV21（YUV420SP）**
  - Y 在前，UV 紧跟在后且交错排列（NV12: YYYYY...UVUVUV...；NV21: YYYYY...VUVUVU...）
- **I420/YUV420P**
  - Y 在前，U在中间，V在最后，三个分量分开存储（YYYY...UUU...VVV...）

------

## 4. 常用格式对比表

| 格式    | Y分量存储 | U/V存储 | 备注                        |
| ------- | --------- | ------- | --------------------------- |
| YUV444P | 平面      | 平面    | Y/U/V 各自完整分量          |
| YUV422P | 平面      | 平面    | 每2像素共用U/V              |
| YUYV422 | 交错      |         | YUYV YUYV YUYV...           |
| YUV420P | 平面      | 平面    | 最常用存储/编码格式         |
| NV12    | 平面      | UV交错  | Intel/FFmpeg常用，硬件友好  |
| NV21    | 平面      | VU交错  | Android常用，和NV12顺序相反 |



------

## 5. 为什么嵌入式开发常用 YUV？

- **高效、节省带宽/存储**
- **编码器、显示/采集接口标准（如V4L2）广泛支持**
- **方便各种后处理和视频算法直接操作亮度/色度分量**

------

## 6. 小结

- **YUV 是一种面向“效率”和“兼容”的颜色编码格式，核心是分离亮度与色度，易于压缩和处理。**
- **YUV420/422/444/NV12/YUYV/I420/NV21 等是常见变种，要根据场合选择合适的格式。**