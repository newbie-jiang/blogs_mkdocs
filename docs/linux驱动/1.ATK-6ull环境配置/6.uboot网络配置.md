**ATK** **30.4.4** **网络操作命令**



## 介绍几个uboot的命令

### printenv 打印环境变量

**printenv** 查看所有环境变量，这会把所有当前 U-Boot 环境变量和它们的内容一行行打印出来

setenv  设置（或修改）U-Boot 的环境变量

```
=> printenv
baudrate=115200
board_name=EVK
board_rev=14X14
boot_fdt=try
bootcmd=run findfdt;mmc dev ${mmcdev};mmc dev ${mmcdev}; if mmc rescan; then if run loadbootscript; then run bootscript; else if run loadimage; then run mmcboot; else run netboot; fi; fi; else run netboot; fi
bootcmd_mfg=run mfgtool_args;bootz ${loadaddr} ${initrd_addr} ${fdt_addr};
bootdelay=3
bootscript=echo Running bootscript from mmc ...; source
console=ttymxc0
ethact=FEC1
ethaddr=b8:ae:1d:01:00:00
ethprime=FEC
fdt_addr=0x83000000
fdt_file=undefined
fdt_high=0xffffffff
findfdt=if test $fdt_file = undefined; then setenv fdt_file imx6ull-alientek-emmc.dtb; fi;
gatewayip=192.168.0.1
image=zImage
initrd_addr=0x83800000
initrd_high=0xffffffff
ip_dyn=yes
ipaddr=192.168.0.99
loadaddr=0x80800000
loadbootscript=fatload mmc ${mmcdev}:${mmcpart} ${loadaddr} ${script};
loadfdt=fatload mmc ${mmcdev}:${mmcpart} ${fdt_addr} ${fdt_file}
loadimage=fatload mmc ${mmcdev}:${mmcpart} ${loadaddr} ${image}
mfgtool_args=setenv bootargs console=${console},${baudrate} rdinit=/linuxrc g_mass_storage.stall=0 g_mass_storage.removable=1 g_mass_storage.file=/fat g_mass_storage.ro=1 g_mass_storage.idVendor=0x066F g_mass_storage.idProduct=0x37FF g_mass_storage.iSerialNumber="" clk_ignore_unused
mmcargs=setenv bootargs console=${console},${baudrate} root=${mmcroot}
mmcautodetect=yes
mmcboot=echo Booting from mmc ...; run mmcargs; if test ${boot_fdt} = yes || test ${boot_fdt} = try; then if run loadfdt; then bootz ${loadaddr} - ${fdt_addr}; else if test ${boot_fdt} = try; then bootz; else echo WARN: Cannot load the DT; fi; fi; else bootz; fi;
mmcdev=0
mmcpart=1
mmcroot=/dev/mmcblk0p2 rootwait rw
netargs=setenv bootargs console=${console},${baudrate} root=/dev/nfs ip=dhcp nfsroot=${serverip}:${nfsroot},v3,tcp
netboot=echo Booting from net ...; run netargs; if test ${ip_dyn} = yes; then setenv get_cmd dhcp; else setenv get_cmd tftp; fi; ${get_cmd} ${image}; if test ${boot_fdt} = yes || test ${boot_fdt} = try; then if ${get_cmd} ${fdt_addr} ${fdt_file}; then bootz ${loadaddr} - ${fdt_addr}; else if test ${boot_fdt} = try; then bootz; else echo WARN: Cannot load the DT; fi; fi; else bootz; fi;
netmask=255.255.255.0
panel=TFT7016
script=boot.scr
serverip=192.168.0.38

Environment size: 2310/8188 bytes

```

### setenv  设置/修改 环境变量

setenv 变量名 值     

比如

```
setenv ipaddr 192.168.0.99
setenv serverip 192.168.0.38
setenv bootargs "console=ttymxc0,115200 root=/dev/nfs ..."
```

没有的环境变量会自己创建



### saveenv 保存环境变量

该命令执行后，环境变量会永久保存，相当于写到非易失性存储器，设置了环境变量，如果不使用该命令，断电后会失效





在使用 uboot 的网络功能之前先用网线将开发板的 ENET2 接口和电脑或者路由器连接起

来，I.MX6U-ALPHA 开发板有两个网口：ENET1 和 ENET2，一定要连接 ENET2

烧录好uboot后需要配置网络连接，默认不会自动连接，需要先设置环境变量

![image-20250720012800626](https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250720012800626.png)![image-20250720013302701](https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250720013302701.png)

```
setenv ipaddr 192.168.0.99
setenv ethaddr b8:ae:1d:01:00:00
setenv gatewayip 192.168.0.1
setenv netmask 255.255.255.0
setenv serverip 192.168.0.38
saveenv
```

```
ping 192.168.0.38
```

![image-20250720013239534](https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250720013239534.png)

![image-20250720013345472](https://newbie-typora.oss-cn-shenzhen.aliyuncs.com/TyporaJPG/image-20250720013345472.png)



这时候就将网络配置好了，再次启动也不用重新配置了