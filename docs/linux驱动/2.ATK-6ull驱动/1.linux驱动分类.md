Linux驱动分类

Linux 驱动按照不同的角度可以有多种分类方法。下面分别按照**功能类型**、**总线类型**、**内核层次**等维度来详细说明：

------

## 一、按功能类型分类

这是最常见的分类方法，也就是根据外设或驱动服务的对象进行分类：

| 分类          | 典型设备                         | 常见驱动示例                  |
| ------------- | -------------------------------- | ----------------------------- |
| 字符设备驱动  | 串口、I2C、SPI、GPIO、LED、ADC等 | `/dev/ttyS0`, `/dev/led0` 等  |
| 块设备驱动    | 硬盘、U盘、SD卡、eMMC等          | `/dev/sda`, `/dev/mmcblk0` 等 |
| 网络设备驱动  | 网卡、WIFI、蓝牙、4G模块等       | eth0, wlan0, ppp0 等          |
| 显示设备驱动  | LCD、HDMI、屏幕等                | `/dev/fb0` (framebuffer)等    |
| 输入设备驱动  | 键盘、鼠标、触摸屏、按键、红外等 | event0, input0 等             |
| 声卡驱动      | 音频输入输出、麦克风、扬声器等   | ALSA, OSS 等                  |
| 相机/视频驱动 | 摄像头、视频采集卡               | `/dev/video0`                 |
| 其他特种设备  | 电源管理、传感器、加速度计等     | battery, sensor 等            |



------

## 二、按总线类型分类

Linux内核强调**驱动和总线分离**，每种外设通过某种总线连接到主机。驱动通常也按总线进行分类：

- **Platform 驱动**：板级设备，典型于 SoC 外设（如 GPIO, UART, I2C 控制器等）
- **PCI/PCIe 驱动**：PC 机上的显卡、声卡、网卡等
- **USB 驱动**：U盘、USB鼠标、USB摄像头等
- **I2C/SPI 驱动**：嵌入式设备上的各种传感器、EEPROM等
- **Virtio 驱动**：虚拟化环境下的虚拟设备
- **其他专用总线**：如CAN、LIN、SDIO等

------

## 三、按内核层次结构分类

- **内核态驱动**：运行在内核空间，绝大多数硬件驱动（如platform/usb/网络/块设备等）
- **用户态驱动（用户空间驱动）**：通过特定机制（如uio、fuse、libusb等）让用户空间直接控制硬件

------

## 四、按实现方式/架构分类

- **单一驱动**：传统方式，驱动和设备直接耦合
- **分离式驱动**（驱动-设备模型，Driver/Device）：现代内核推荐，驱动和设备信息分离，自动匹配（如platform_driver/platform_device）
- **总线-驱动-设备三元模型**：Linux内核主流方式（bus、driver、device三大结构体）

------

## 五、按功能层次（高级 vs 低级）

- **低级驱动（底层驱动）**：直接与硬件寄存器打交道
- **中间层驱动**：为上层提供抽象接口（如VFS、ALSA中间件等）
- **高级驱动**：直接服务于应用层（如某些字符设备、FUSE文件系统）

------

## 总结

> **常见分类方式：**
>
> 1. 字符设备驱动
> 2. 块设备驱动
> 3. 网络设备驱动
> 4. 平台/总线驱动（platform/pci/usb/i2c/spi等）

**实际开发中常用的通用模型是：**

- 总线（bus）- 设备（device）- 驱动（driver）三元组模型（bus_type, device, driver 结构体）